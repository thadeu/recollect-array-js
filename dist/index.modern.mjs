import t from"lodash.filter";import r from"lodash.last";import e from"lodash.chunk";import n from"lodash.isplainobject";import c from"lodash.isfunction";import i from"lodash.get";const o=(t,r,e)=>i(t,r)==e,s=(t,r,e)=>{const n=i(t,r);return e.match(/^([^*])(\w*)([*])$/)?n.startsWith(e.replace(/\*$/,"")):e.match(/^([*])(\w*)([^*])$/)?n.endsWith(e.replace(/^\*/,"")):!!e.match(/^\*\w*\*$/)&&n.includes(e.replace(/^\*/,"").replace(/\*$/,""))};class a{static factory(t,r,e){if(this.PREDICATES.includes(t)&&this[t])return c(e)&&(e=e()),this[t](r,e)}static matches(t,r){return function(e){let n=[i(e,t)].flatMap(t=>t);return(r=[r].flatMap(t=>t)).some(t=>n.includes(t))}}static not_matches(t,r){return!this.matches(t,r)}static in(t,r){return this.matches(t,r)}static not_in(t,r){return!this.in(t,r)}static eq(t,r){return function(e){return o(e,t,r)}}static not_eq(t,r){return function(e){return!o(e,t,r)}}static gte(t,r){return function(e){return i(e,t)>=r}}static gt(t,r){return function(e){return i(e,t)>r}}static lte(t,r){return function(e){return i(e,t)<=r}}static lt(t,r){return function(e){return i(e,t)<r}}static cont(t,r){return function(e){return s(e,t,r)}}static not_cont(t,r){return function(e){return!s(e,t,r)}}}a.PREDICATES=["eq","not_eq","gte","lte","gt","lt","matches","not_matches","in","not_in","cont","not_cont"];const u=(r,e,n,c)=>t(r,a.factory(e,n,c)),l=(t,r,e)=>{for(let[n,c]of Object.entries(e))t=u(t,n,r,c);return t},f=(t,e,n)=>{let c=e.split("_"),i=r(c),o=e.replace(`_${i}`,"");return u(t,i,o,n)};class h{static filter(t,r){let e=Array.from(t);return e=this.recollect(e,r),e}}h.recollect=(t,r)=>{let c=Object.entries(r).flatMap(t=>t),i=e(c,2);for(let[e,c]of i)t=n(c)?l(t,e,c):f(t,e,r[e]);return t};export{h as RecollectArray,h as default};
//# sourceMappingURL=index.modern.mjs.map
